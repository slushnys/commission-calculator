require('source-map-support').install();

/*! // 0.0.1 */
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/connectors/currency-rates/index.ts":
/*!************************************************!*\
  !*** ./src/connectors/currency-rates/index.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n// import type { Got } from 'got'\n// import got from 'got'\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.makeCurrencyConnector = exports.makeGetExchangeRates = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"tslib\");\nconst axios_1 = (0, tslib_1.__importDefault)(__webpack_require__(/*! axios */ \"axios\"));\nfunction makeGetExchangeRates(client) {\n    return async function getExchangeRates(date = '2021-01-01') {\n        const { data } = await client.get(date);\n        // const { data } = await client.get(date).json<{ data: RatesResponse }>()\n        return data;\n    };\n}\nexports.makeGetExchangeRates = makeGetExchangeRates;\nfunction makeCurrencyConnector() {\n    // const client = got.extend({\n    //     retry: {\n    //         backoffLimit: 1.2, // TODO\n    //         methods: ['GET'],\n    //     },\n    //     prefixUrl: 'https://api.exchangerate.host',\n    // })\n    const client = axios_1.default.create({ baseURL: 'https://api.exchangerate.host' });\n    return {\n        client,\n        getExchangeRates: makeGetExchangeRates(client),\n    };\n}\nexports.makeCurrencyConnector = makeCurrencyConnector;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29ubmVjdG9ycy9jdXJyZW5jeS1yYXRlcy9pbmRleC50cy5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsaUNBQWlDO0FBQ2pDLHdCQUF3Qjs7OztBQUd4Qix3RkFBeUI7QUFJekIsU0FBZ0Isb0JBQW9CLENBQUMsTUFBcUI7SUFDdEQsT0FBTyxLQUFLLFVBQVUsZ0JBQWdCLENBQUMsSUFBSSxHQUFHLFlBQVk7UUFDdEQsTUFBTSxFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sTUFBTSxDQUFDLEdBQUcsQ0FBZ0IsSUFBSSxDQUFDO1FBQ3RELDBFQUEwRTtRQUUxRSxPQUFPLElBQUk7SUFDZixDQUFDO0FBQ0wsQ0FBQztBQVBELG9EQU9DO0FBR0QsU0FBZ0IscUJBQXFCO0lBQ2pDLDhCQUE4QjtJQUM5QixlQUFlO0lBQ2YscUNBQXFDO0lBQ3JDLDRCQUE0QjtJQUM1QixTQUFTO0lBQ1Qsa0RBQWtEO0lBQ2xELEtBQUs7SUFDTCxNQUFNLE1BQU0sR0FBRyxlQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsT0FBTyxFQUFFLCtCQUErQixFQUFFLENBQUM7SUFDekUsT0FBTztRQUNILE1BQU07UUFDTixnQkFBZ0IsRUFBRSxvQkFBb0IsQ0FBQyxNQUFNLENBQUM7S0FDakQ7QUFDTCxDQUFDO0FBYkQsc0RBYUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy96aWdtYXNsdXNueXMvV29ya3NwYWNlL3NyYy9naXRodWIuY29tL3NsdXNobnlzL2NvbW1pc3Npb24tY2FsY3VsYXRvci9zcmMvY29ubmVjdG9ycy9jdXJyZW5jeS1yYXRlcy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgdHlwZSB7IEdvdCB9IGZyb20gJ2dvdCdcbi8vIGltcG9ydCBnb3QgZnJvbSAnZ290J1xuXG5pbXBvcnQgdHlwZSB7IEF4aW9zSW5zdGFuY2UgfSBmcm9tICdheGlvcydcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcydcbi8vIGNvbnN0IGdvdCA9IHJlcXVpcmUoJ2dvdCcpXG5pbXBvcnQgdHlwZSB7IFJhdGVzUmVzcG9uc2UgfSBmcm9tICcuL3NjaGVtYS50eXBlJ1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZUdldEV4Y2hhbmdlUmF0ZXMoY2xpZW50OiBBeGlvc0luc3RhbmNlKSB7XG4gICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIGdldEV4Y2hhbmdlUmF0ZXMoZGF0ZSA9ICcyMDIxLTAxLTAxJykge1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGNsaWVudC5nZXQ8UmF0ZXNSZXNwb25zZT4oZGF0ZSlcbiAgICAgICAgLy8gY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBjbGllbnQuZ2V0KGRhdGUpLmpzb248eyBkYXRhOiBSYXRlc1Jlc3BvbnNlIH0+KClcblxuICAgICAgICByZXR1cm4gZGF0YVxuICAgIH1cbn1cblxuZXhwb3J0IHR5cGUgQ3VycmVuY3lDb25uZWN0b3IgPSBSZXR1cm5UeXBlPHR5cGVvZiBtYWtlQ3VycmVuY3lDb25uZWN0b3I+XG5leHBvcnQgZnVuY3Rpb24gbWFrZUN1cnJlbmN5Q29ubmVjdG9yKCkge1xuICAgIC8vIGNvbnN0IGNsaWVudCA9IGdvdC5leHRlbmQoe1xuICAgIC8vICAgICByZXRyeToge1xuICAgIC8vICAgICAgICAgYmFja29mZkxpbWl0OiAxLjIsIC8vIFRPRE9cbiAgICAvLyAgICAgICAgIG1ldGhvZHM6IFsnR0VUJ10sXG4gICAgLy8gICAgIH0sXG4gICAgLy8gICAgIHByZWZpeFVybDogJ2h0dHBzOi8vYXBpLmV4Y2hhbmdlcmF0ZS5ob3N0JyxcbiAgICAvLyB9KVxuICAgIGNvbnN0IGNsaWVudCA9IGF4aW9zLmNyZWF0ZSh7IGJhc2VVUkw6ICdodHRwczovL2FwaS5leGNoYW5nZXJhdGUuaG9zdCcgfSlcbiAgICByZXR1cm4ge1xuICAgICAgICBjbGllbnQsXG4gICAgICAgIGdldEV4Y2hhbmdlUmF0ZXM6IG1ha2VHZXRFeGNoYW5nZVJhdGVzKGNsaWVudCksXG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/connectors/currency-rates/index.ts\n");

/***/ }),

/***/ "./src/domain/constants.ts":
/*!*********************************!*\
  !*** ./src/domain/constants.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.RuleTypes = void 0;\nvar RuleTypes;\n(function (RuleTypes) {\n    RuleTypes[\"DefaultPricing\"] = \"defaultPricing\";\n    RuleTypes[\"HighTurnover\"] = \"highTurnover\";\n    RuleTypes[\"ClientDiscount\"] = \"clientDiscount\";\n})(RuleTypes = exports.RuleTypes || (exports.RuleTypes = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZG9tYWluL2NvbnN0YW50cy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7QUFBQSxJQUFZLFNBSVg7QUFKRCxXQUFZLFNBQVM7SUFDakIsOENBQWlDO0lBQ2pDLDBDQUE2QjtJQUM3Qiw4Q0FBaUM7QUFDckMsQ0FBQyxFQUpXLFNBQVMsR0FBVCxpQkFBUyxLQUFULGlCQUFTLFFBSXBCIiwic291cmNlcyI6WyIvVXNlcnMvemlnbWFzbHVzbnlzL1dvcmtzcGFjZS9zcmMvZ2l0aHViLmNvbS9zbHVzaG55cy9jb21taXNzaW9uLWNhbGN1bGF0b3Ivc3JjL2RvbWFpbi9jb25zdGFudHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gUnVsZVR5cGVzIHtcbiAgICBEZWZhdWx0UHJpY2luZyA9ICdkZWZhdWx0UHJpY2luZycsXG4gICAgSGlnaFR1cm5vdmVyID0gJ2hpZ2hUdXJub3ZlcicsXG4gICAgQ2xpZW50RGlzY291bnQgPSAnY2xpZW50RGlzY291bnQnLFxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/domain/constants.ts\n");

/***/ }),

/***/ "./src/domain/parser.ts":
/*!******************************!*\
  !*** ./src/domain/parser.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.makeRuleParser = void 0;\nconst constants_1 = __webpack_require__(/*! ./constants */ \"./src/domain/constants.ts\");\nfunction chooseTransactionCost({ transactionCost, calculatedFee, }) {\n    let commissionFee;\n    if (transactionCost === undefined) {\n        commissionFee = calculatedFee;\n    }\n    else {\n        commissionFee = transactionCost > calculatedFee ? calculatedFee : transactionCost;\n    }\n    return commissionFee;\n}\nconst defaultRule = {\n    commissionPercent: 0.005,\n    commissionMinimum: 0.05,\n    type: constants_1.RuleTypes.DefaultPricing,\n};\nfunction makeRuleParser() {\n    const existingRules = {};\n    function parse({ rules = [defaultRule], clientId, transactionValue, monthlyTransactionValue, }) {\n        let transactionCost = undefined;\n        for (const rule of rules) {\n            // 1st rule\n            if (rule.type === 'defaultPricing') {\n                let calculatedFee;\n                const previousRule = existingRules[rule.type];\n                const currentRuleFee = rule.commissionPercent * transactionValue;\n                // const currentRuleCommission = rule.commissionPercent * transactionValue\n                // const previousRuleCommission =\n                // previousRule === undefined\n                //     ? undefined\n                //     : previousRule.commissionPercent * transactionValue\n                // let { fee:calculatedFee , rule: ruleToAdd} = calculateFeeWithNewRole({previousRule, currentRule: rule, previousRuleCommission, currentRuleCommission})\n                // const previousCommission = previousRule.commissionPercent * transactionValue\n                // rulesToBeApplied[rule.type] = ruleToAdd\n                if (previousRule !== undefined) {\n                    const previousCommission = previousRule.commissionPercent * transactionValue;\n                    const isPreviousLarger = previousCommission > currentRuleFee;\n                    calculatedFee = isPreviousLarger ? currentRuleFee : previousCommission;\n                    const insertedRule = (existingRules[rule.type] = isPreviousLarger\n                        ? rule\n                        : previousRule);\n                    calculatedFee =\n                        calculatedFee < insertedRule.commissionMinimum\n                            ? insertedRule.commissionMinimum\n                            : calculatedFee;\n                }\n                else {\n                    calculatedFee = currentRuleFee;\n                    existingRules[rule.type] = rule;\n                }\n                transactionCost = chooseTransactionCost({ transactionCost, calculatedFee });\n            }\n            // 2nd rule\n            if (rule.type === 'clientDiscount') {\n                if (rule.clientId === clientId) {\n                    const previousRule = existingRules[rule.type];\n                    let calculatedFee;\n                    const currentRuleFee = rule.commissionMinimum;\n                    if (previousRule !== undefined) {\n                        const previousCommission = previousRule.commissionMinimum;\n                        const isPreviousLarger = previousCommission > currentRuleFee;\n                        calculatedFee = isPreviousLarger ? currentRuleFee : previousCommission;\n                        existingRules[rule.type] = isPreviousLarger ? rule : previousRule;\n                    }\n                    else {\n                        calculatedFee = currentRuleFee;\n                        existingRules[rule.type] = rule;\n                    }\n                    transactionCost = chooseTransactionCost({ transactionCost, calculatedFee });\n                }\n            }\n            // 3rd rule\n            if (rule.type === 'highTurnover') {\n                if (rule.applyAfter <= monthlyTransactionValue) {\n                    const previousRule = existingRules[rule.type];\n                    let calculatedFee;\n                    const currentRuleFee = rule.commissionMinimum;\n                    if (previousRule !== undefined) {\n                        const previousCommission = previousRule.commissionMinimum;\n                        const isPreviousLarger = previousCommission > currentRuleFee;\n                        calculatedFee = isPreviousLarger ? currentRuleFee : previousCommission;\n                        existingRules[rule.type] = isPreviousLarger ? rule : previousRule;\n                    }\n                    else {\n                        calculatedFee = currentRuleFee;\n                        existingRules[rule.type] = rule;\n                    }\n                    transactionCost = chooseTransactionCost({ transactionCost, calculatedFee });\n                }\n            }\n        }\n        // TODO: make sure its not undefined\n        return transactionCost;\n    }\n    return {\n        parse,\n    };\n}\nexports.makeRuleParser = makeRuleParser;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7aUJBQzlFO2FBQ0o7U0FDSjtRQUNELG9DQUFvQztRQUNwQyxPQUFPLGVBQWU7SUFDMUIsQ0FBQztJQUNELE9BQU87UUFDSCxLQUFLO0tBQ1I7QUFDTCxDQUFDO0FBcEdELHdDQW9HQyIsInNvdXJjZXMiOlsiL1VzZXJzL3ppZ21hc2x1c255cy9Xb3Jrc3BhY2Uvc3JjL2dpdGh1Yi5jb20vc2x1c2hueXMvY29tbWlzc2lvbi1jYWxjdWxhdG9yL3NyYy9kb21haW4vcGFyc2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1bGVUeXBlcyB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IHR5cGUge1xuICAgIERlZmF1bHRQcmljaW5nUnVsZSxcbiAgICBDbGllbnREaXNjb3VudFJ1bGUsXG4gICAgSGlnaFR1cm5vdmVyUnVsZSxcbiAgICBDb21taXNzaW9uUnVsZXMsXG59IGZyb20gJy4vcGFyc2VyLnR5cGUnXG5cbmZ1bmN0aW9uIGNob29zZVRyYW5zYWN0aW9uQ29zdCh7XG4gICAgdHJhbnNhY3Rpb25Db3N0LFxuICAgIGNhbGN1bGF0ZWRGZWUsXG59OiB7XG4gICAgdHJhbnNhY3Rpb25Db3N0PzogbnVtYmVyXG4gICAgY2FsY3VsYXRlZEZlZTogbnVtYmVyXG59KSB7XG4gICAgbGV0IGNvbW1pc3Npb25GZWU6IG51bWJlclxuICAgIGlmICh0cmFuc2FjdGlvbkNvc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb21taXNzaW9uRmVlID0gY2FsY3VsYXRlZEZlZVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbW1pc3Npb25GZWUgPSB0cmFuc2FjdGlvbkNvc3QgPiBjYWxjdWxhdGVkRmVlID8gY2FsY3VsYXRlZEZlZSA6IHRyYW5zYWN0aW9uQ29zdFxuICAgIH1cbiAgICByZXR1cm4gY29tbWlzc2lvbkZlZVxufVxuXG5jb25zdCBkZWZhdWx0UnVsZTogRGVmYXVsdFByaWNpbmdSdWxlID0ge1xuICAgIGNvbW1pc3Npb25QZXJjZW50OiAwLjAwNSwgLy8gMC41JVxuICAgIGNvbW1pc3Npb25NaW5pbXVtOiAwLjA1LFxuICAgIHR5cGU6IFJ1bGVUeXBlcy5EZWZhdWx0UHJpY2luZyxcbn1cblxuZXhwb3J0IHR5cGUgUnVsZVBhcnNlciA9IFJldHVyblR5cGU8dHlwZW9mIG1ha2VSdWxlUGFyc2VyPlxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSdWxlUGFyc2VyKCkge1xuICAgIGNvbnN0IGV4aXN0aW5nUnVsZXM6IHtcbiAgICAgICAgZGVmYXVsdFByaWNpbmc/OiBEZWZhdWx0UHJpY2luZ1J1bGVcbiAgICAgICAgY2xpZW50RGlzY291bnQ/OiBDbGllbnREaXNjb3VudFJ1bGVcbiAgICAgICAgaGlnaFR1cm5vdmVyPzogSGlnaFR1cm5vdmVyUnVsZVxuICAgIH0gPSB7fVxuICAgIGZ1bmN0aW9uIHBhcnNlKHtcbiAgICAgICAgcnVsZXMgPSBbZGVmYXVsdFJ1bGVdLFxuICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgdHJhbnNhY3Rpb25WYWx1ZSxcbiAgICAgICAgbW9udGhseVRyYW5zYWN0aW9uVmFsdWUsXG4gICAgfToge1xuICAgICAgICBydWxlczogQ29tbWlzc2lvblJ1bGVzW11cbiAgICAgICAgY2xpZW50SWQ6IHN0cmluZ1xuICAgICAgICB0cmFuc2FjdGlvblZhbHVlOiBudW1iZXJcbiAgICAgICAgbW9udGhseVRyYW5zYWN0aW9uVmFsdWU6IG51bWJlclxuICAgIH0pIHtcbiAgICAgICAgbGV0IHRyYW5zYWN0aW9uQ29zdDogbnVtYmVyIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkXG4gICAgICAgIGZvciAoY29uc3QgcnVsZSBvZiBydWxlcykge1xuICAgICAgICAgICAgLy8gMXN0IHJ1bGVcbiAgICAgICAgICAgIGlmIChydWxlLnR5cGUgPT09ICdkZWZhdWx0UHJpY2luZycpIHtcbiAgICAgICAgICAgICAgICBsZXQgY2FsY3VsYXRlZEZlZTogbnVtYmVyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNSdWxlID0gZXhpc3RpbmdSdWxlc1tydWxlLnR5cGVdXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFJ1bGVGZWUgPSBydWxlLmNvbW1pc3Npb25QZXJjZW50ICogdHJhbnNhY3Rpb25WYWx1ZVxuICAgICAgICAgICAgICAgIC8vIGNvbnN0IGN1cnJlbnRSdWxlQ29tbWlzc2lvbiA9IHJ1bGUuY29tbWlzc2lvblBlcmNlbnQgKiB0cmFuc2FjdGlvblZhbHVlXG4gICAgICAgICAgICAgICAgLy8gY29uc3QgcHJldmlvdXNSdWxlQ29tbWlzc2lvbiA9XG4gICAgICAgICAgICAgICAgLy8gcHJldmlvdXNSdWxlID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAvLyAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAvLyAgICAgOiBwcmV2aW91c1J1bGUuY29tbWlzc2lvblBlcmNlbnQgKiB0cmFuc2FjdGlvblZhbHVlXG4gICAgICAgICAgICAgICAgLy8gbGV0IHsgZmVlOmNhbGN1bGF0ZWRGZWUgLCBydWxlOiBydWxlVG9BZGR9ID0gY2FsY3VsYXRlRmVlV2l0aE5ld1JvbGUoe3ByZXZpb3VzUnVsZSwgY3VycmVudFJ1bGU6IHJ1bGUsIHByZXZpb3VzUnVsZUNvbW1pc3Npb24sIGN1cnJlbnRSdWxlQ29tbWlzc2lvbn0pXG4gICAgICAgICAgICAgICAgLy8gY29uc3QgcHJldmlvdXNDb21taXNzaW9uID0gcHJldmlvdXNSdWxlLmNvbW1pc3Npb25QZXJjZW50ICogdHJhbnNhY3Rpb25WYWx1ZVxuICAgICAgICAgICAgICAgIC8vIHJ1bGVzVG9CZUFwcGxpZWRbcnVsZS50eXBlXSA9IHJ1bGVUb0FkZFxuXG4gICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzUnVsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzQ29tbWlzc2lvbiA9IHByZXZpb3VzUnVsZS5jb21taXNzaW9uUGVyY2VudCAqIHRyYW5zYWN0aW9uVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNQcmV2aW91c0xhcmdlciA9IHByZXZpb3VzQ29tbWlzc2lvbiA+IGN1cnJlbnRSdWxlRmVlXG4gICAgICAgICAgICAgICAgICAgIGNhbGN1bGF0ZWRGZWUgPSBpc1ByZXZpb3VzTGFyZ2VyID8gY3VycmVudFJ1bGVGZWUgOiBwcmV2aW91c0NvbW1pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zZXJ0ZWRSdWxlID0gKGV4aXN0aW5nUnVsZXNbcnVsZS50eXBlXSA9IGlzUHJldmlvdXNMYXJnZXJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcnVsZVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBwcmV2aW91c1J1bGUpXG5cbiAgICAgICAgICAgICAgICAgICAgY2FsY3VsYXRlZEZlZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxjdWxhdGVkRmVlIDwgaW5zZXJ0ZWRSdWxlLmNvbW1pc3Npb25NaW5pbXVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBpbnNlcnRlZFJ1bGUuY29tbWlzc2lvbk1pbmltdW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNhbGN1bGF0ZWRGZWVcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjYWxjdWxhdGVkRmVlID0gY3VycmVudFJ1bGVGZWVcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdSdWxlc1tydWxlLnR5cGVdID0gcnVsZVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uQ29zdCA9IGNob29zZVRyYW5zYWN0aW9uQ29zdCh7IHRyYW5zYWN0aW9uQ29zdCwgY2FsY3VsYXRlZEZlZSB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gMm5kIHJ1bGVcbiAgICAgICAgICAgIGlmIChydWxlLnR5cGUgPT09ICdjbGllbnREaXNjb3VudCcpIHtcbiAgICAgICAgICAgICAgICBpZiAocnVsZS5jbGllbnRJZCA9PT0gY2xpZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNSdWxlID0gZXhpc3RpbmdSdWxlc1tydWxlLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgIGxldCBjYWxjdWxhdGVkRmVlOiBudW1iZXJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFJ1bGVGZWUgPSBydWxlLmNvbW1pc3Npb25NaW5pbXVtXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzUnVsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0NvbW1pc3Npb24gPSBwcmV2aW91c1J1bGUuY29tbWlzc2lvbk1pbmltdW1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzUHJldmlvdXNMYXJnZXIgPSBwcmV2aW91c0NvbW1pc3Npb24gPiBjdXJyZW50UnVsZUZlZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsY3VsYXRlZEZlZSA9IGlzUHJldmlvdXNMYXJnZXIgPyBjdXJyZW50UnVsZUZlZSA6IHByZXZpb3VzQ29tbWlzc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdSdWxlc1tydWxlLnR5cGVdID0gaXNQcmV2aW91c0xhcmdlciA/IHJ1bGUgOiBwcmV2aW91c1J1bGVcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGN1bGF0ZWRGZWUgPSBjdXJyZW50UnVsZUZlZVxuICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdSdWxlc1tydWxlLnR5cGVdID0gcnVsZVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25Db3N0ID0gY2hvb3NlVHJhbnNhY3Rpb25Db3N0KHsgdHJhbnNhY3Rpb25Db3N0LCBjYWxjdWxhdGVkRmVlIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAzcmQgcnVsZVxuICAgICAgICAgICAgaWYgKHJ1bGUudHlwZSA9PT0gJ2hpZ2hUdXJub3ZlcicpIHtcbiAgICAgICAgICAgICAgICBpZiAocnVsZS5hcHBseUFmdGVyIDw9IG1vbnRobHlUcmFuc2FjdGlvblZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzUnVsZSA9IGV4aXN0aW5nUnVsZXNbcnVsZS50eXBlXVxuICAgICAgICAgICAgICAgICAgICBsZXQgY2FsY3VsYXRlZEZlZTogbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRSdWxlRmVlID0gcnVsZS5jb21taXNzaW9uTWluaW11bVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c1J1bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNDb21taXNzaW9uID0gcHJldmlvdXNSdWxlLmNvbW1pc3Npb25NaW5pbXVtXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1ByZXZpb3VzTGFyZ2VyID0gcHJldmlvdXNDb21taXNzaW9uID4gY3VycmVudFJ1bGVGZWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGN1bGF0ZWRGZWUgPSBpc1ByZXZpb3VzTGFyZ2VyID8gY3VycmVudFJ1bGVGZWUgOiBwcmV2aW91c0NvbW1pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nUnVsZXNbcnVsZS50eXBlXSA9IGlzUHJldmlvdXNMYXJnZXIgPyBydWxlIDogcHJldmlvdXNSdWxlXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxjdWxhdGVkRmVlID0gY3VycmVudFJ1bGVGZWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nUnVsZXNbcnVsZS50eXBlXSA9IHJ1bGVcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uQ29zdCA9IGNob29zZVRyYW5zYWN0aW9uQ29zdCh7IHRyYW5zYWN0aW9uQ29zdCwgY2FsY3VsYXRlZEZlZSB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBtYWtlIHN1cmUgaXRzIG5vdCB1bmRlZmluZWRcbiAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uQ29zdFxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBwYXJzZSxcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/domain/parser.ts\n");

/***/ }),

/***/ "./src/functions/commission-calculator/commision-calculator.ts":
/*!*********************************************************************!*\
  !*** ./src/functions/commission-calculator/commision-calculator.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.makeCommissionCalculator = void 0;\nconst rules_1 = __webpack_require__(/*! ../../repositories/rules */ \"./src/repositories/rules/index.ts\");\nconst transactions_1 = __webpack_require__(/*! ../../repositories/transactions */ \"./src/repositories/transactions/index.ts\");\nfunction makeCommissionCalculator({ currencyRateConnector, ruleParser, clients, }) {\n    return async function commisionCalculator({ amount, currency, clientId, date, }) {\n        let currentExchangeRate = 1;\n        if (currency !== 'EUR') {\n            const { rates } = await currencyRateConnector.getExchangeRates(date);\n            currentExchangeRate = rates[currency];\n        }\n        const exchangedAmount = amount * currentExchangeRate;\n        const rules = await (0, rules_1.getRules)(clientId);\n        const monthlyTransactionValue = await (0, transactions_1.getMonthlyTransactionValue)({\n            clientId,\n            clients,\n            date,\n        });\n        const commissionAmount = ruleParser.parse({\n            rules,\n            clientId,\n            transactionValue: exchangedAmount,\n            monthlyTransactionValue,\n        });\n        const currentMonth = new Date(date).getMonth() + 1;\n        clients.push({ clientId, amount, month: currentMonth });\n        return Number(commissionAmount?.toPrecision(2));\n    };\n}\nexports.makeCommissionCalculator = makeCommissionCalculator;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZnVuY3Rpb25zL2NvbW1pc3Npb24tY2FsY3VsYXRvci9jb21taXNpb24tY2FsY3VsYXRvci50cy5qcyIsIm1hcHBpbmdzIjoiOzs7QUFFQSx5R0FBbUQ7QUFDbkQsOEhBQTRFO0FBSTVFLFNBQWdCLHdCQUF3QixDQUFDLEVBQ3JDLHFCQUFxQixFQUNyQixVQUFVLEVBQ1YsT0FBTyxHQUtWO0lBQ0csT0FBTyxLQUFLLFVBQVUsbUJBQW1CLENBQUMsRUFDdEMsTUFBTSxFQUNOLFFBQVEsRUFDUixRQUFRLEVBQ1IsSUFBSSxHQU1QO1FBQ0csSUFBSSxtQkFBbUIsR0FBRyxDQUFDO1FBQzNCLElBQUksUUFBUSxLQUFLLEtBQUssRUFBRTtZQUNwQixNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsTUFBTSxxQkFBcUIsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUM7WUFDcEUsbUJBQW1CLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQztTQUN4QztRQUNELE1BQU0sZUFBZSxHQUFHLE1BQU0sR0FBRyxtQkFBbUI7UUFDcEQsTUFBTSxLQUFLLEdBQUcsTUFBTSxvQkFBUSxFQUFDLFFBQVEsQ0FBQztRQUN0QyxNQUFNLHVCQUF1QixHQUFHLE1BQU0sNkNBQTBCLEVBQUM7WUFDN0QsUUFBUTtZQUNSLE9BQU87WUFDUCxJQUFJO1NBQ1AsQ0FBQztRQUNGLE1BQU0sZ0JBQWdCLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQztZQUN0QyxLQUFLO1lBQ0wsUUFBUTtZQUNSLGdCQUFnQixFQUFFLGVBQWU7WUFDakMsdUJBQXVCO1NBQzFCLENBQUM7UUFDRixNQUFNLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDO1FBQ2xELE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsQ0FBQztRQUV2RCxPQUFPLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbkQsQ0FBQztBQUNMLENBQUM7QUEzQ0QsNERBMkNDIiwic291cmNlcyI6WyIvVXNlcnMvemlnbWFzbHVzbnlzL1dvcmtzcGFjZS9zcmMvZ2l0aHViLmNvbS9zbHVzaG55cy9jb21taXNzaW9uLWNhbGN1bGF0b3Ivc3JjL2Z1bmN0aW9ucy9jb21taXNzaW9uLWNhbGN1bGF0b3IvY29tbWlzaW9uLWNhbGN1bGF0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDdXJyZW5jeUNvbm5lY3RvciB9IGZyb20gJy4uLy4uL2Nvbm5lY3RvcnMvY3VycmVuY3ktcmF0ZXMnXG5pbXBvcnQgdHlwZSB7IFJ1bGVQYXJzZXIgfSBmcm9tICcuLi8uLi9kb21haW4vcGFyc2VyJ1xuaW1wb3J0IHsgZ2V0UnVsZXMgfSBmcm9tICcuLi8uLi9yZXBvc2l0b3JpZXMvcnVsZXMnXG5pbXBvcnQgeyBnZXRNb250aGx5VHJhbnNhY3Rpb25WYWx1ZSB9IGZyb20gJy4uLy4uL3JlcG9zaXRvcmllcy90cmFuc2FjdGlvbnMnXG5pbXBvcnQgdHlwZSB7IENsaWVudHMgfSBmcm9tICcuLi8uLi9yZXBvc2l0b3JpZXMvdHJhbnNhY3Rpb25zL3R5cGVzJ1xuXG5leHBvcnQgdHlwZSBDb21taXNzaW9uQ2FsY3VsYXRvciA9IFJldHVyblR5cGU8dHlwZW9mIG1ha2VDb21taXNzaW9uQ2FsY3VsYXRvcj5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlQ29tbWlzc2lvbkNhbGN1bGF0b3Ioe1xuICAgIGN1cnJlbmN5UmF0ZUNvbm5lY3RvcixcbiAgICBydWxlUGFyc2VyLFxuICAgIGNsaWVudHMsXG59OiB7XG4gICAgY3VycmVuY3lSYXRlQ29ubmVjdG9yOiBDdXJyZW5jeUNvbm5lY3RvclxuICAgIHJ1bGVQYXJzZXI6IFJ1bGVQYXJzZXJcbiAgICBjbGllbnRzOiBDbGllbnRzXG59KSB7XG4gICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIGNvbW1pc2lvbkNhbGN1bGF0b3Ioe1xuICAgICAgICBhbW91bnQsXG4gICAgICAgIGN1cnJlbmN5LFxuICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgZGF0ZSxcbiAgICB9OiB7XG4gICAgICAgIGFtb3VudDogbnVtYmVyXG4gICAgICAgIGN1cnJlbmN5OiBzdHJpbmdcbiAgICAgICAgY2xpZW50SWQ6IHN0cmluZ1xuICAgICAgICBkYXRlOiBzdHJpbmdcbiAgICB9KSB7XG4gICAgICAgIGxldCBjdXJyZW50RXhjaGFuZ2VSYXRlID0gMVxuICAgICAgICBpZiAoY3VycmVuY3kgIT09ICdFVVInKSB7XG4gICAgICAgICAgICBjb25zdCB7IHJhdGVzIH0gPSBhd2FpdCBjdXJyZW5jeVJhdGVDb25uZWN0b3IuZ2V0RXhjaGFuZ2VSYXRlcyhkYXRlKVxuICAgICAgICAgICAgY3VycmVudEV4Y2hhbmdlUmF0ZSA9IHJhdGVzW2N1cnJlbmN5XVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV4Y2hhbmdlZEFtb3VudCA9IGFtb3VudCAqIGN1cnJlbnRFeGNoYW5nZVJhdGVcbiAgICAgICAgY29uc3QgcnVsZXMgPSBhd2FpdCBnZXRSdWxlcyhjbGllbnRJZClcbiAgICAgICAgY29uc3QgbW9udGhseVRyYW5zYWN0aW9uVmFsdWUgPSBhd2FpdCBnZXRNb250aGx5VHJhbnNhY3Rpb25WYWx1ZSh7XG4gICAgICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgICAgIGNsaWVudHMsXG4gICAgICAgICAgICBkYXRlLFxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBjb21taXNzaW9uQW1vdW50ID0gcnVsZVBhcnNlci5wYXJzZSh7XG4gICAgICAgICAgICBydWxlcyxcbiAgICAgICAgICAgIGNsaWVudElkLFxuICAgICAgICAgICAgdHJhbnNhY3Rpb25WYWx1ZTogZXhjaGFuZ2VkQW1vdW50LFxuICAgICAgICAgICAgbW9udGhseVRyYW5zYWN0aW9uVmFsdWUsXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IGN1cnJlbnRNb250aCA9IG5ldyBEYXRlKGRhdGUpLmdldE1vbnRoKCkgKyAxXG4gICAgICAgIGNsaWVudHMucHVzaCh7IGNsaWVudElkLCBhbW91bnQsIG1vbnRoOiBjdXJyZW50TW9udGggfSlcblxuICAgICAgICByZXR1cm4gTnVtYmVyKGNvbW1pc3Npb25BbW91bnQ/LnRvUHJlY2lzaW9uKDIpKVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/functions/commission-calculator/commision-calculator.ts\n");

/***/ }),

/***/ "./src/functions/commission-calculator/index.ts":
/*!******************************************************!*\
  !*** ./src/functions/commission-calculator/index.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.handler = void 0;\nconst currency_rates_1 = __webpack_require__(/*! ../../connectors/currency-rates */ \"./src/connectors/currency-rates/index.ts\");\nconst parser_1 = __webpack_require__(/*! ../../domain/parser */ \"./src/domain/parser.ts\");\nconst commision_calculator_1 = __webpack_require__(/*! ./commision-calculator */ \"./src/functions/commission-calculator/commision-calculator.ts\");\nconst schema_1 = __webpack_require__(/*! ./schema */ \"./src/functions/commission-calculator/schema.ts\");\n// fake database\nconst clients = [];\nconst handler = async ({ body }) => {\n    let parsedBody;\n    try {\n        parsedBody = JSON.parse(body);\n    }\n    catch (error) {\n        return {\n            statusCode: 400,\n            body: JSON.stringify({ error: 'Couldnt parse the body' }),\n        };\n    }\n    const { error } = schema_1.commissionInputSchema.validate(parsedBody);\n    if (error) {\n        return {\n            statusCode: 400,\n            body: JSON.stringify({ error: 'Data passed was invalid' }),\n        };\n    }\n    const { client_id: clientId, amount, currency, date } = parsedBody;\n    const currencyRateConnector = (0, currency_rates_1.makeCurrencyConnector)();\n    const ruleParser = (0, parser_1.makeRuleParser)();\n    const commissionCalculator = (0, commision_calculator_1.makeCommissionCalculator)({\n        currencyRateConnector,\n        ruleParser,\n        clients,\n    });\n    const commission = await commissionCalculator({ clientId, amount, currency, date });\n    const response = { amount: commission, currency: 'EUR' };\n    const { error: responseSchemaError } = schema_1.commissionResponseSchema.validate(response);\n    if (responseSchemaError) {\n        return {\n            statusCode: 400,\n            body: JSON.stringify({ error: 'Trouble in the paradise to give you a response' }),\n        };\n    }\n    return {\n        statusCode: 200,\n        body: JSON.stringify(response),\n    };\n};\nexports.handler = handler;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZnVuY3Rpb25zL2NvbW1pc3Npb24tY2FsY3VsYXRvci9pbmRleC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7QUFBQSxnSUFBdUU7QUFDdkUsMEZBQW9EO0FBQ3BELGtKQUFpRTtBQUVqRSx3R0FBMEU7QUFJMUUsZ0JBQWdCO0FBQ2hCLE1BQU0sT0FBTyxHQUFZLEVBQUU7QUFHcEIsTUFBTSxPQUFPLEdBQWlCLEtBQUssRUFBRSxFQUFFLElBQUksRUFBUyxFQUFFLEVBQUU7SUFDM0QsSUFBSSxVQUF1QztJQUMzQyxJQUFJO1FBQ0EsVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFnQztLQUMvRDtJQUFDLE9BQU8sS0FBSyxFQUFFO1FBQ1osT0FBTztZQUNILFVBQVUsRUFBRSxHQUFHO1lBQ2YsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxLQUFLLEVBQUUsd0JBQXdCLEVBQUUsQ0FBQztTQUM1RDtLQUNKO0lBQ0QsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLDhCQUFxQixDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUM7SUFDNUQsSUFBSSxLQUFLLEVBQUU7UUFDUCxPQUFPO1lBQ0gsVUFBVSxFQUFFLEdBQUc7WUFDZixJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEtBQUssRUFBRSx5QkFBeUIsRUFBRSxDQUFDO1NBQzdEO0tBQ0o7SUFDRCxNQUFNLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxHQUFHLFVBQVU7SUFDbEUsTUFBTSxxQkFBcUIsR0FBRywwQ0FBcUIsR0FBRTtJQUNyRCxNQUFNLFVBQVUsR0FBRywyQkFBYyxHQUFFO0lBRW5DLE1BQU0sb0JBQW9CLEdBQUcsbURBQXdCLEVBQUM7UUFDbEQscUJBQXFCO1FBQ3JCLFVBQVU7UUFDVixPQUFPO0tBQ1YsQ0FBQztJQUNGLE1BQU0sVUFBVSxHQUFHLE1BQU0sb0JBQW9CLENBQUMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztJQUNuRixNQUFNLFFBQVEsR0FBRyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRTtJQUV4RCxNQUFNLEVBQUUsS0FBSyxFQUFFLG1CQUFtQixFQUFFLEdBQUcsaUNBQXdCLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQztJQUNsRixJQUFJLG1CQUFtQixFQUFFO1FBQ3JCLE9BQU87WUFDSCxVQUFVLEVBQUUsR0FBRztZQUNmLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsS0FBSyxFQUFFLGdEQUFnRCxFQUFFLENBQUM7U0FDcEY7S0FDSjtJQUNELE9BQU87UUFDSCxVQUFVLEVBQUUsR0FBRztRQUNmLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQztLQUNqQztBQUNMLENBQUM7QUF4Q1ksZUFBTyxXQXdDbkIiLCJzb3VyY2VzIjpbIi9Vc2Vycy96aWdtYXNsdXNueXMvV29ya3NwYWNlL3NyYy9naXRodWIuY29tL3NsdXNobnlzL2NvbW1pc3Npb24tY2FsY3VsYXRvci9zcmMvZnVuY3Rpb25zL2NvbW1pc3Npb24tY2FsY3VsYXRvci9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYWtlQ3VycmVuY3lDb25uZWN0b3IgfSBmcm9tICcuLi8uLi9jb25uZWN0b3JzL2N1cnJlbmN5LXJhdGVzJ1xuaW1wb3J0IHsgbWFrZVJ1bGVQYXJzZXIgfSBmcm9tICcuLi8uLi9kb21haW4vcGFyc2VyJ1xuaW1wb3J0IHsgbWFrZUNvbW1pc3Npb25DYWxjdWxhdG9yIH0gZnJvbSAnLi9jb21taXNpb24tY2FsY3VsYXRvcidcbmltcG9ydCB0eXBlIHsgSGFuZGxlciB9IGZyb20gJ2F3cy1sYW1iZGEnXG5pbXBvcnQgeyBjb21taXNzaW9uSW5wdXRTY2hlbWEsIGNvbW1pc3Npb25SZXNwb25zZVNjaGVtYSB9IGZyb20gJy4vc2NoZW1hJ1xuaW1wb3J0IHR5cGUgeyBDb21taXNzaW9uQ2FsY3VsYXRvclJlc3BvbnNlLCBDb21taXNzaW9uQ2FsY3VsYXRvclJlcXVlc3QsIEV2ZW50IH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB0eXBlIHsgQ2xpZW50cyB9IGZyb20gJy4uLy4uL3JlcG9zaXRvcmllcy90cmFuc2FjdGlvbnMvdHlwZXMnXG5cbi8vIGZha2UgZGF0YWJhc2VcbmNvbnN0IGNsaWVudHM6IENsaWVudHMgPSBbXVxuXG50eXBlIEV2ZW50SGFuZGxlciA9IEhhbmRsZXI8RXZlbnQsIENvbW1pc3Npb25DYWxjdWxhdG9yUmVzcG9uc2U+XG5leHBvcnQgY29uc3QgaGFuZGxlcjogRXZlbnRIYW5kbGVyID0gYXN5bmMgKHsgYm9keSB9OiBFdmVudCkgPT4ge1xuICAgIGxldCBwYXJzZWRCb2R5OiBDb21taXNzaW9uQ2FsY3VsYXRvclJlcXVlc3RcbiAgICB0cnkge1xuICAgICAgICBwYXJzZWRCb2R5ID0gSlNPTi5wYXJzZShib2R5KSBhcyBDb21taXNzaW9uQ2FsY3VsYXRvclJlcXVlc3RcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzQ29kZTogNDAwLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ0NvdWxkbnQgcGFyc2UgdGhlIGJvZHknIH0pLFxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGNvbW1pc3Npb25JbnB1dFNjaGVtYS52YWxpZGF0ZShwYXJzZWRCb2R5KVxuICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzQ29kZTogNDAwLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ0RhdGEgcGFzc2VkIHdhcyBpbnZhbGlkJyB9KSxcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB7IGNsaWVudF9pZDogY2xpZW50SWQsIGFtb3VudCwgY3VycmVuY3ksIGRhdGUgfSA9IHBhcnNlZEJvZHlcbiAgICBjb25zdCBjdXJyZW5jeVJhdGVDb25uZWN0b3IgPSBtYWtlQ3VycmVuY3lDb25uZWN0b3IoKVxuICAgIGNvbnN0IHJ1bGVQYXJzZXIgPSBtYWtlUnVsZVBhcnNlcigpXG5cbiAgICBjb25zdCBjb21taXNzaW9uQ2FsY3VsYXRvciA9IG1ha2VDb21taXNzaW9uQ2FsY3VsYXRvcih7XG4gICAgICAgIGN1cnJlbmN5UmF0ZUNvbm5lY3RvcixcbiAgICAgICAgcnVsZVBhcnNlcixcbiAgICAgICAgY2xpZW50cyxcbiAgICB9KVxuICAgIGNvbnN0IGNvbW1pc3Npb24gPSBhd2FpdCBjb21taXNzaW9uQ2FsY3VsYXRvcih7IGNsaWVudElkLCBhbW91bnQsIGN1cnJlbmN5LCBkYXRlIH0pXG4gICAgY29uc3QgcmVzcG9uc2UgPSB7IGFtb3VudDogY29tbWlzc2lvbiwgY3VycmVuY3k6ICdFVVInIH1cblxuICAgIGNvbnN0IHsgZXJyb3I6IHJlc3BvbnNlU2NoZW1hRXJyb3IgfSA9IGNvbW1pc3Npb25SZXNwb25zZVNjaGVtYS52YWxpZGF0ZShyZXNwb25zZSlcbiAgICBpZiAocmVzcG9uc2VTY2hlbWFFcnJvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzQ29kZTogNDAwLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ1Ryb3VibGUgaW4gdGhlIHBhcmFkaXNlIHRvIGdpdmUgeW91IGEgcmVzcG9uc2UnIH0pLFxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1c0NvZGU6IDIwMCxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpLFxuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/functions/commission-calculator/index.ts\n");

/***/ }),

/***/ "./src/functions/commission-calculator/schema.ts":
/*!*******************************************************!*\
  !*** ./src/functions/commission-calculator/schema.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.commissionResponseSchema = exports.commissionInputSchema = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"tslib\");\nconst joi_1 = (0, tslib_1.__importDefault)(__webpack_require__(/*! joi */ \"joi\"));\nexports.commissionInputSchema = joi_1.default.object({\n    amount: joi_1.default.number().required(),\n    currency: joi_1.default.string().required(),\n    date: joi_1.default.string().required(),\n    client_id: joi_1.default.string().required(),\n});\nexports.commissionResponseSchema = joi_1.default.object().keys({\n    amount: joi_1.default.number().required(),\n    currency: joi_1.default.string().required(),\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZnVuY3Rpb25zL2NvbW1pc3Npb24tY2FsY3VsYXRvci9zY2hlbWEudHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGtGQUFxQjtBQUVSLDZCQUFxQixHQUFHLGFBQUcsQ0FBQyxNQUFNLENBQUM7SUFDNUMsTUFBTSxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7SUFDL0IsUUFBUSxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7SUFDakMsSUFBSSxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7SUFDN0IsU0FBUyxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7Q0FDckMsQ0FBQztBQUVXLGdDQUF3QixHQUFHLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUM7SUFDdEQsTUFBTSxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7SUFDL0IsUUFBUSxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7Q0FDcEMsQ0FBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3ppZ21hc2x1c255cy9Xb3Jrc3BhY2Uvc3JjL2dpdGh1Yi5jb20vc2x1c2hueXMvY29tbWlzc2lvbi1jYWxjdWxhdG9yL3NyYy9mdW5jdGlvbnMvY29tbWlzc2lvbi1jYWxjdWxhdG9yL3NjaGVtYS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSm9pIGZyb20gJ2pvaSdcblxuZXhwb3J0IGNvbnN0IGNvbW1pc3Npb25JbnB1dFNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAgIGFtb3VudDogSm9pLm51bWJlcigpLnJlcXVpcmVkKCksXG4gICAgY3VycmVuY3k6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICAgIGRhdGU6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICAgIGNsaWVudF9pZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG59KVxuXG5leHBvcnQgY29uc3QgY29tbWlzc2lvblJlc3BvbnNlU2NoZW1hID0gSm9pLm9iamVjdCgpLmtleXMoe1xuICAgIGFtb3VudDogSm9pLm51bWJlcigpLnJlcXVpcmVkKCksXG4gICAgY3VycmVuY3k6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxufSlcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/functions/commission-calculator/schema.ts\n");

/***/ }),

/***/ "./src/repositories/rules/index.ts":
/*!*****************************************!*\
  !*** ./src/repositories/rules/index.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.getRules = void 0;\nconst constants_1 = __webpack_require__(/*! ../../domain/constants */ \"./src/domain/constants.ts\");\nasync function getRules(clientId) {\n    return await Promise.resolve([\n        {\n            commissionPercent: 0.005,\n            commissionMinimum: 0.05,\n            type: constants_1.RuleTypes.DefaultPricing,\n        },\n        {\n            type: constants_1.RuleTypes.HighTurnover,\n            applyAfter: 1000,\n            commissionMinimum: 0.03,\n        },\n        {\n            type: constants_1.RuleTypes.ClientDiscount,\n            commissionMinimum: 0.05,\n            clientId: '42',\n        },\n    ]);\n}\nexports.getRules = getRules;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVwb3NpdG9yaWVzL3J1bGVzL2luZGV4LnRzLmpzIiwibWFwcGluZ3MiOiI7OztBQUFBLG1HQUFrRDtBQU8zQyxLQUFLLFVBQVUsUUFBUSxDQUFDLFFBQWdCO0lBQzNDLE9BQU8sTUFBTSxPQUFPLENBQUMsT0FBTyxDQUFDO1FBQ3pCO1lBQ0ksaUJBQWlCLEVBQUUsS0FBSztZQUN4QixpQkFBaUIsRUFBRSxJQUFJO1lBQ3ZCLElBQUksRUFBRSxxQkFBUyxDQUFDLGNBQWM7U0FDWDtRQUN2QjtZQUNJLElBQUksRUFBRSxxQkFBUyxDQUFDLFlBQVk7WUFDNUIsVUFBVSxFQUFFLElBQUk7WUFDaEIsaUJBQWlCLEVBQUUsSUFBSTtTQUNOO1FBQ3JCO1lBQ0ksSUFBSSxFQUFFLHFCQUFTLENBQUMsY0FBYztZQUM5QixpQkFBaUIsRUFBRSxJQUFJO1lBQ3ZCLFFBQVEsRUFBRSxJQUFJO1NBQ0s7S0FDMUIsQ0FBQztBQUNOLENBQUM7QUFsQkQsNEJBa0JDIiwic291cmNlcyI6WyIvVXNlcnMvemlnbWFzbHVzbnlzL1dvcmtzcGFjZS9zcmMvZ2l0aHViLmNvbS9zbHVzaG55cy9jb21taXNzaW9uLWNhbGN1bGF0b3Ivc3JjL3JlcG9zaXRvcmllcy9ydWxlcy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSdWxlVHlwZXMgfSBmcm9tICcuLi8uLi9kb21haW4vY29uc3RhbnRzJ1xuaW1wb3J0IHR5cGUge1xuICAgIERlZmF1bHRQcmljaW5nUnVsZSxcbiAgICBIaWdoVHVybm92ZXJSdWxlLFxuICAgIENsaWVudERpc2NvdW50UnVsZSxcbn0gZnJvbSAnLi4vLi4vZG9tYWluL3BhcnNlci50eXBlJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UnVsZXMoY2xpZW50SWQ6IHN0cmluZykge1xuICAgIHJldHVybiBhd2FpdCBQcm9taXNlLnJlc29sdmUoW1xuICAgICAgICB7XG4gICAgICAgICAgICBjb21taXNzaW9uUGVyY2VudDogMC4wMDUsIC8vIDAuNSVcbiAgICAgICAgICAgIGNvbW1pc3Npb25NaW5pbXVtOiAwLjA1LFxuICAgICAgICAgICAgdHlwZTogUnVsZVR5cGVzLkRlZmF1bHRQcmljaW5nLFxuICAgICAgICB9IGFzIERlZmF1bHRQcmljaW5nUnVsZSxcbiAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogUnVsZVR5cGVzLkhpZ2hUdXJub3ZlcixcbiAgICAgICAgICAgIGFwcGx5QWZ0ZXI6IDEwMDAsXG4gICAgICAgICAgICBjb21taXNzaW9uTWluaW11bTogMC4wMyxcbiAgICAgICAgfSBhcyBIaWdoVHVybm92ZXJSdWxlLFxuICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBSdWxlVHlwZXMuQ2xpZW50RGlzY291bnQsXG4gICAgICAgICAgICBjb21taXNzaW9uTWluaW11bTogMC4wNSxcbiAgICAgICAgICAgIGNsaWVudElkOiAnNDInLFxuICAgICAgICB9IGFzIENsaWVudERpc2NvdW50UnVsZSxcbiAgICBdKVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/repositories/rules/index.ts\n");

/***/ }),

/***/ "./src/repositories/transactions/index.ts":
/*!************************************************!*\
  !*** ./src/repositories/transactions/index.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.getMonthlyTransactionValue = void 0;\nasync function getMonthlyTransactionValue({ clientId, clients, date, }) {\n    const currentMonth = new Date(date).getMonth() + 1;\n    return Promise.resolve(clients\n        .filter((client) => client.clientId === clientId && client.month === currentMonth)\n        .reduce((previousValue, currentValue) => previousValue + currentValue.amount, 0));\n}\nexports.getMonthlyTransactionValue = getMonthlyTransactionValue;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVwb3NpdG9yaWVzL3RyYW5zYWN0aW9ucy9pbmRleC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7QUFFTyxLQUFLLFVBQVUsMEJBQTBCLENBQUMsRUFDN0MsUUFBUSxFQUNSLE9BQU8sRUFDUCxJQUFJLEdBS1A7SUFDRyxNQUFNLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDO0lBQ2xELE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FDbEIsT0FBTztTQUNGLE1BQU0sQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLFFBQVEsS0FBSyxRQUFRLElBQUksTUFBTSxDQUFDLEtBQUssS0FBSyxZQUFZLENBQUM7U0FDakYsTUFBTSxDQUFTLENBQUMsYUFBYSxFQUFFLFlBQVksRUFBRSxFQUFFLENBQUMsYUFBYSxHQUFHLFlBQVksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQy9GO0FBQ0wsQ0FBQztBQWZELGdFQWVDIiwic291cmNlcyI6WyIvVXNlcnMvemlnbWFzbHVzbnlzL1dvcmtzcGFjZS9zcmMvZ2l0aHViLmNvbS9zbHVzaG55cy9jb21taXNzaW9uLWNhbGN1bGF0b3Ivc3JjL3JlcG9zaXRvcmllcy90cmFuc2FjdGlvbnMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDbGllbnRzIH0gZnJvbSAnLi90eXBlcydcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1vbnRobHlUcmFuc2FjdGlvblZhbHVlKHtcbiAgICBjbGllbnRJZCxcbiAgICBjbGllbnRzLFxuICAgIGRhdGUsXG59OiB7XG4gICAgY2xpZW50SWQ6IHN0cmluZ1xuICAgIGNsaWVudHM6IENsaWVudHNcbiAgICBkYXRlOiBzdHJpbmdcbn0pIHtcbiAgICBjb25zdCBjdXJyZW50TW9udGggPSBuZXcgRGF0ZShkYXRlKS5nZXRNb250aCgpICsgMVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoXG4gICAgICAgIGNsaWVudHNcbiAgICAgICAgICAgIC5maWx0ZXIoKGNsaWVudCkgPT4gY2xpZW50LmNsaWVudElkID09PSBjbGllbnRJZCAmJiBjbGllbnQubW9udGggPT09IGN1cnJlbnRNb250aClcbiAgICAgICAgICAgIC5yZWR1Y2U8bnVtYmVyPigocHJldmlvdXNWYWx1ZSwgY3VycmVudFZhbHVlKSA9PiBwcmV2aW91c1ZhbHVlICsgY3VycmVudFZhbHVlLmFtb3VudCwgMClcbiAgICApXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/repositories/transactions/index.ts\n");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = require("axios");

/***/ }),

/***/ "joi":
/*!**********************!*\
  !*** external "joi" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("joi");

/***/ }),

/***/ "tslib":
/*!************************!*\
  !*** external "tslib" ***!
  \************************/
/***/ ((module) => {

module.exports = require("tslib");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/functions/commission-calculator/index.ts");
/******/ 	module.exports = __webpack_exports__;
/******/ 	
/******/ })()
;